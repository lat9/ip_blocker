<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
<title>IP Blocker for Zen Cart v1.5.0+</title>

<style type="text/css">
<!--
a, a:active, a:visited { color: #006666; text-decoration: none; }
a:hover { color:#00CC99; text-decoration: underline; }
BODY, P, H1, H2, H3, H4, H5, H6, LI, TD, DD, DT { font-family: Verdana, AvantGarde, Tahoma, Arial, sans-serif; font-size: 10pt; color: black; padding: 0px; margin: 20px; }
H1, H2, H3, H4 { font-weight: bold; }
h1 { font-size: 20px; }
h2 { font-size: 16px; border-top: 1px solid black; padding-top: 10px; }
ol li, ul li { margin-left: 0; }
ol li ul li, ul li ul li, ol li ol li { margin: 0 auto 5px; }
pre { padding-left: 40px; }
.corefile { color: red; }
-->
</style>
</head>

<body>
<h1>IP Blocker for Zen Cart v1.5.0 (and later)</h1>
<h3>Version 2.0.0 by lat9</h3>
<p>Current Support Thread at Zen Cart Forums: <a href="http://www.zen-cart.com/showthread.php?211251-IP-Blocker-1-5-1" target="_blank">http://www.zen-cart.com/showthread.php?211251-IP-Blocker-1-5-1</a></p>

<h2>Version History:</h2>
<ul>
  <li>v1.0.0, 2009-09-10, Initial release by $d (noblesenior@gmail.com).</li>
  <li>v2.0.0, 2014-01-09 (lat9)<ul>
    <li>Converted this readme to HTML format.</li>
    <li>Add the admin-page registration to allow the tool to work in the Zen Cart v1.5.0+ admin environment.</li>
    <li>Converted (deprecated) ereg calls to preg_match calls.</li>
    <li>Moved all language strings to defined values.</li>
    <li>Converted HTML input and form tags to use the Zen Cart built-in functions.</li>
    <li>Renamed IP Blocker's login page script to <em>special_login</em>.</li>
  </ul></li>
  <li>v2.0.1, 2014-01-30:<ul>
    <li>Non-superusers cannot access the tool.  Thanks to Design75 for quickly pointing out the solution! Changed:<ol>
      <li>/YOUR_ADMIN/includes/extra_datafiles/ip_blocker_filenames.php</li>
      <li>/YOUR_ADMIN/includes/languages/english/ip_blocker.php</li>
    </li>
  </ul></li>  
</ul>

<h2>What it does</h2>
<p><strong>IP Blocker</strong> allows you to block accesses to your store, based on the IP address of the access.  Once you've copied the plugin's files to your store, use your Zen Cart admin's <em>Tools-&gt;IP Blocker</em> to specify the list of addresses. There are two blocks of IP addresses that you specify:</p>
<ol>
  <li>Blocked IP Addresses. An IP address that falls in one of the ranges specified here is redirected to your store's <code>/special_login.php</code> script.  If the <em>IP Blocker</em> password is correctly entered on that login screen, that IP address is allowed access for that session's duration.</li>
  <li>Allowed IP Addresses. Use this IP address list to provide a list of exceptions to the blocked list above.  If an IP address falls into one of the ranges specified here, access is allowed to your store even though the address also falls into a blocked address range.</li>
</ol>
<h3>IP Settings</h3>
<p>For each of the IP Address lists, you enter one address specification per line using one of the following formats:</p>
<ol>
  <li><em>Single-address Format</em>.  Enter the full IPv4-formatted address, e.g. 192.168.1.17.</li>
  <li><em>Full-Octet Range Format</em>. Enter the upper octets for the IP address, then use the asterisk (*) to indicate that all lower octets are to be included.  For example, 192.168.1.* translates to the IP address range 192.168.1.0-192.168.1.255; 192.168.* translates to the range 192.168.0.0-192.168.255.255.</li>
  <li><em>Sub-Octet Range Format</em>. Enter the upper octets for the IP address, then use the format <b>n/m</b> to specify the lowest octet range from <b>n</b> to <b>m</b>.  For example, 192.168.1.1/17 translates to the IP address range 192.168.1.1-192.168.1.17.</li>
</ol>
<p><strong>Note:</strong> It is <em>your</em> responsibility to ensure that there are no overlaps in each of the IP address ranges.  Overlaps don't harm anything, but can lead to &quot;bloat&quot; in the IP Blocker's database table!</p>
<h3>Password</h3>
<p>Use this screen within the IP Blocker tool to enter the password (the default value is <b>123456</b>) that will be accepted by the <code>special_login.php</code> script, allowing an otherwise blocked IP address to access your store.</p>
<h3>Enable</h3>
<p>Use this screen within the IP Blocker tool to enable (default) the IP blocker or disable its operation while maintaining your current settings.</p>

<h2>Installation</h2>
<p>There are no core-file overwrites in this plugin, but you should <strong>always</strong> backup your cart's database and files prior to making any changes. Once you have unzipped the plugin's distribution file:</p>
<ol>
  <li>Rename the /YOUR_ADMIN directory to match your Zen Cart admin directory's name.
  <li>Copy the plugin's files to your Zen Cart's file system:<ol>
    <li>/special_login.php</li>
    <li>/includes/auto_loaders/config.ip_blocker.php</li>
    <li>/includes/extra_datafiles/ip_blocker_database_tables.php</li>
    <li>/includes/init_includes/init_ip_blocker.php</li>
    <li>/YOUR_ADMIN/ip_blocker.php</li>
    <li>/YOUR_ADMIN/includes/extra_datafiles/ip_blocker_database_tables.php</li>
    <li>/YOUR_ADMIN/includes/extra_datafiles/ip_blocker_filenames.php</li>
    <li>/YOUR_ADMIN/includes/functions/extra_functions/ip_blocker_functions.php</li>
    <li>/YOUR_ADMIN/includes/languages/english/ip_blocker.php</li>
    <li>/YOUR_ADMIN/includes/languates/english/extra_definitions/ip_blocker.php</li>
  </ol></li>
  <li>Log into your Zen Cart admin and click <em>Tools-&gt;IP Blocker</em>. Follow the instructions given by that tool to complete the installation.</li>
</ol>

<h2>Removing the IP Blocker</h2>
<p>To remove the IP Blocker tool from your Zen Cart:</p>
<ol>
  <li>Click the <em>Uninstall</em> link on the <em>Tools-&gt;IP Blocker</em> tool to remove its database table.</li>
  <li>Delete the files that you copied during the plugin's installation.</li>
  <li>Run the /ip_blocker_uninstall.sql using your Zen Cart's <em>Tools->Install SQL Patches</em>.</li>
</ol>

</body>
</html>